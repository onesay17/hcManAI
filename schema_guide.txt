# 데이터베이스 스키마 가이드 (hcManAI용)

## 테이블: Pkfl (heechang 스키마)
- **테이블 설명:** "OrderInquiry" (발주 조회). 구매팀에서 협력업체에 발주하는 '발주서' 정보가 저장되는 메인 테이블입니다.
- **테이블 전체 경로 (반드시 사용):** `heechang.heechang.Pkfl`
- **중요:** 모든 SQL 쿼리에서 테이블명은 반드시 `heechang.heechang.Pkfl` 형식으로 사용해야 합니다. `Pkfl`만 사용하면 안 됩니다.
- **주요 키:** pkNokey (고유 ID)
- **연관 테이블:** 이 테이블의 'pkNokey'는 'PK2_nkey'와 조인됩니다. 또한 'DeliveryPlan' 테이블과 1:N 관계를 맺습니다.

## 주요 컬럼 상세 설명 (Pkfl 테이블)

### 기본 정보
- **pkNokey:** 이 발주 건의 고유 식별자(Primary Key).
- **Pk_date (실제 필드명):** 발주일. 발주서가 생성된 날짜 (YYYYMMDD). 예: 20230404
- **Pk_pdat (실제 필드명):** 입고예정일. 협력사가 이 날짜까지 물품을 입고시켜야 함 (YYYYMMDD).
- **Pk_ldat (실제 필드명):** 실입고일. 실제 물품이 입고된 날짜 (YYYYMMDD).
- **pk_cldt (실제 필드명):** 발주종결일. 이 발주 건이 최종 마감된 날짜 (YYYYMMDD).
- **pk_rcdt (실제 필드명):** 접수일. 협력사가 이 발주를 확인하고 '접수'한 날짜.

### 거래처 및 품목 정보
- **Pk_gcod (실제 필드명):** 거래처코드. 물품을 공급하는 협력업체의 코드.
- **pk_gona (실제 필드명):** 거래처명. 협력업체 이름.
- **pk_pcod (실제 필드명):** 품번. 발주한 아이템(부품, 원자재 등)의 고유 코드.
- **pk_pona (실제 필드명):** 품명. 아이템의 이름.
- **pk_unit (실제 필드명):** 단위. 발주 수량의 단위 (예: EA, KG, BOX).

### 수량 및 금액 정보
- **Pk_pqty (실제 필드명):** 요청량. 현업부서에서 요청한 수량.
- **Pk_bqty (실제 필드명):** 발주량. 협력업체에 실제 주문을 넣은 수량.
- **Pk_lqty (실제 필드명):** 실입고량. 실제로 입고된 수량.
- **Pk_bpri (실제 필드명):** 단가. 아이템 1개당 가격.
- **pk_amtt (실제 필드명):** 금액 (자동계산). (발주량 * 단가).
- **pk_vat (실제 필드명):** 부가세 (자동계산). (금액 * 0.1).
- **pk_totl (실제 필드명):** 합계금액 (자동계산). (금액 + 부가세).

### 상태 및 구분 코드 (*** RAG 성능에 가장 중요! ***)
- **pk_jing (실제 필드명):** 처리여부. '0' = 미처리, '1' = 처리 완료. (예: "처리 완료된 발주 건" 검색 시 사용)
- **pk_ausd (실제 필드명):** 발생방법. '1' = 자동발행(시스템 자동 생성), '2' = 수동발행(사용자 직접 생성).
- **pk_rjrs (실제 필드명):** 거절사유. 협력사가 발주를 거절한 경우 그 사유 텍스트.

- **pk_stat (실제 필드명, statusTypeGroup):** 진행상태 그룹. 발주서의 현재 라이프사이클 상태.
    - '0' = 미확인
    - '1' = 확인
    - '2' = 계획등록
    - '3' = 계획협의중
    - '4' = 승인
    - '5' = 납품중
    - '6' = 납품완료

- **pk_hcgn (실제 필드명, companyTypeGroup):** 법인구분 그룹.
    - 1 = 글로벌
    - 2 = 희창

- **Pk_gub1 (실제 필드명, factoryTypeGroup):** 공장구분 그룹.
    - 1 = 유산(희창)
    - 2 = 북정
    - 3 = 유산(글로벌)

- **Pk_hubn (실제 필드명, siteTypeGroup):** 현장구분 그룹 (공장 내부의 세부 현장).
    - 1 = 소포장
    - 2 = 건조
    - 3 = 스틱
    - 4 = 액상

- **Pk_gubn (실제 필드명, orderTypeGroup):** 자재구분 (발주 유형).
    - 1 = 원료
    - 2 = 부자재
    - 3 = 상품
    - 4 = 임가공

- **pk_hgps (실제 필드명):** 입고위치 (코드 및 의미).
    - 'HQN' = 본사
    - 'BJ' = 북정
    - 'WHS' = 물류센터
    - 'GJZ' = 광주지점
    - 'DGZ' = 대구지점
    - 'DJZ' = 대전지점
    - 'SLZ' = 서울지점
    - 'BSZ' = 부산지점

### 기타 정보
- **Pk_user (실제 필드명):** 등록자. 이 발주를 생성한 사용자 실명 (텍스트).
- **Pk_bdat (실제 필드명):** 등록일. 발주가 시스템에 등록된 날짜 (YYYYMMDD 형식, 예: 20230404).
- **Pk_remk (실제 필드명):** 비고. 특이사항 메모.

---

## 테이블: sffl (매출정보 테이블)
- **테이블 설명:** 매출 실적 및 목표 정보를 저장하는 테이블입니다. 목표 금액/수량과 실적 금액/수량을 관리하며, 법인구분, 내수/수출 구분, 지점, 국가, 거래처, 영업사원, 제품별 매출 정보를 포함합니다.
- **테이블명 (반드시 사용):** `sffl`
- **중요:** 모든 SQL 쿼리에서 테이블명은 `sffl`만 사용하세요. 스키마 경로를 붙이지 않습니다.
- **주요 키:** sf_key (고유 ID, Primary Key)

## 주요 컬럼 상세 설명 (sffl 테이블)

### 기본 구분 정보
- **sf_hcch (실제 필드명):** 법인구분. varchar(1). '1' = 에이치씨글로벌, '2' = 희창유업
- **sf_nusu (실제 필드명):** 내수수출구분. varchar(1). '1' = 내수, '2' = 수출
- **sf_date (실제 필드명):** 일자. varchar(8). 실적의 경우 8자리(yyyymmdd), 목표의 경우 6자리(yyyymm) 형식
- **sf_msbn (실제 필드명):** 목표/실적구분. varchar(1). '0' = 목표, '1' = 실적

### 지역 및 조직 정보
- **sf_ycod (실제 필드명):** 지점코드. varchar(3)
- **sf_yona (실제 필드명):** 지점명. varchar(50)
- **sf_ncod (실제 필드명):** 국가코드. varchar(3)
- **sf_nona (실제 필드명):** 국가명. varchar(50)

### 거래처 및 영업 정보
- **sf_good (실제 필드명):** 거래처코드. varchar(5)
- **sf_gona (실제 필드명):** 거래처명. varchar(100)
- **sf_dcod (실제 필드명):** 영업사원 코드. varchar(6)
- **sf_dona (실제 필드명):** 영업사원 이름. varchar(30)

### 제품 정보
- **sf_pood (실제 필드명):** 제품코드. varchar(7)
- **sf_pona (실제 필드명):** 제품명. varchar(100)

### 목표 및 실적 정보
- **sf_omny (실제 필드명):** 목표 금액(원). float. 목표 매출 금액
- **sf_oqty (실제 필드명):** 목표 수량(box). float. 목표 매출 수량
- **sf_amtt (실제 필드명):** 실적 금액(원). float. 실제 매출 금액
- **sf_bqty (실제 필드명):** 실적 수량(box). float. 실제 매출 수량

### 등록 정보
- **sf_user (실제 필드명):** 등록자. varchar(20). 데이터를 등록한 사용자
- **sf_time (실제 필드명):** 등록시간. varchar(20). 등록 시각
- **sf_bdat (실제 필드명):** 등록일자. varchar(8). 등록 날짜 (YYYYMMDD 형식)
- **sf_key (실제 필드명):** 유일한 값. int. Primary Key (NOT NULL)

### 사용 예시
- "2024년 8월 매출 실적 조회" → sf_date LIKE '202408%' AND sf_msbn = '1'
- "거래처별 목표 대비 실적 분석" → sf_msbn으로 목표('0')와 실적('1') 구분하여 비교
- "지점별 매출 현황" → sf_yona, sf_amtt, sf_bqty 활용
- "내수/수출 구분별 매출" → sf_nusu로 필터링